{% extends "base.html" %}

{% block title %}AIç”Ÿæˆç¤¾åŒº - AIç¼–ç¨‹é—®é¢˜è§£å†³å¹³å°{% endblock %}

{% block content %}
<section class="hero">
    <h1>AIç”Ÿæˆç¤¾åŒº</h1>
    {% if user and user.user_role == 'solver' %}
    <p>å¸®åŠ©ä»–äººè§£å†³AIç¼–ç¨‹é—®é¢˜ï¼ŒæŠ€èƒ½å˜ç°ï¼</p>
    <div class="cta-buttons">
        <a href="/posts" class="btn-primary">æµè§ˆè®¢å•</a>
        <a href="/categories" class="btn-secondary">æµè§ˆåˆ†ç±»</a>
    </div>
    {% else %}
    <p>AIç¼–ç¨‹é‡åˆ°é—®é¢˜ï¼Ÿè®©ä¸“å®¶æ¥å¸®ä½ è§£å†³ï¼</p>
    <div class="cta-buttons">
        {% if user and user.user_role == 'both' %}
        <a href="/posts/create" class="btn-secondary">å‘å¸ƒæ±‚åŠ©</a>
        <a href="/posts" class="btn-primary">æµè§ˆè®¢å•</a>
        {% else %}
        <a href="/posts/create" class="btn-primary">å‘å¸ƒæ±‚åŠ©</a>
        <a href="/categories" class="btn-secondary">æµè§ˆåˆ†ç±»</a>
        {% endif %}
    </div>
    {% endif %}
</section>

<!-- æœç´¢å·²è§£å†³çš„å¸–å­ -->
<section class="search-section">
    <form action="/posts" method="get" class="search-form">
        <input type="hidden" name="status" value="resolved">
        <div class="search-input-wrapper">
            <input type="text" name="q" class="search-input" placeholder="æœç´¢å·²è§£å†³çš„å¸–å­...">
            <button type="submit" class="search-btn">æœç´¢</button>
        </div>
    </form>
</section>

<section class="features">
    <div class="feature-grid">
        <div class="feature-card">
            <div class="feature-icon">ğŸ¤–</div>
            <h3>AIç¼–ç¨‹æ±‚åŠ©</h3>
            <p>ä½¿ç”¨Cursorã€Copilotç­‰AIå·¥å…·é‡åˆ°é—®é¢˜ï¼Ÿåœ¨è¿™é‡Œæ‰¾åˆ°ç­”æ¡ˆ</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">ğŸ‘¨â€ğŸ’»</div>
            <h3>ä¸“å®¶å¸®åŠ©</h3>
            <p>ç»éªŒä¸°å¯Œçš„å¼€å‘è€…ä¸ºæ‚¨æä¾›ä¸“ä¸šè§£å†³æ–¹æ¡ˆ</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">ğŸ’°</div>
            <h3>æŠ€èƒ½å˜ç°</h3>
            <p>æœ‰æŠ€æœ¯ï¼Ÿå¸®åŠ©ä»–äººè§£å†³é—®é¢˜ï¼Œè·å¾—æŠ¥é…¬</p>
        </div>
    </div>
</section>

<section class="categories-section">
    <h2 class="section-title">é¡¹ç›®åˆ†ç±»</h2>
    <div class="categories-grid"
         hx-get="/partials/categories"
         hx-trigger="load"
         hx-swap="innerHTML">
        <!-- åˆ†ç±»åŠ è½½ä¸­ -->
        <div class="category-card skeleton">
            <div class="skeleton-icon"></div>
            <div class="skeleton-text"></div>
        </div>
        <div class="category-card skeleton">
            <div class="skeleton-icon"></div>
            <div class="skeleton-text"></div>
        </div>
        <div class="category-card skeleton">
            <div class="skeleton-icon"></div>
            <div class="skeleton-text"></div>
        </div>
    </div>
</section>

<section class="recent-posts">
    <div class="section-header">
        <h2 class="section-title">æœ€æ–°æ±‚åŠ©</h2>
        <a href="/posts" class="view-all">æŸ¥çœ‹å…¨éƒ¨ â†’</a>
    </div>
    <div id="recent-posts-list"
         hx-get="/partials/posts/recent"
         hx-trigger="load"
         hx-swap="innerHTML">
        <!-- å¸–å­åŠ è½½ä¸­ -->
        <div class="post-card skeleton">
            <div class="skeleton-title"></div>
            <div class="skeleton-desc"></div>
        </div>
        <div class="post-card skeleton">
            <div class="skeleton-title"></div>
            <div class="skeleton-desc"></div>
        </div>
    </div>
</section>

<style>
.search-section {
    max-width: 600px;
    margin: 0 auto 3rem;
}

.search-form {
    width: 100%;
}

.search-input-wrapper {
    display: flex;
    gap: 0.5rem;
    background: var(--card-background);
    padding: 0.5rem;
    border-radius: var(--border-radius);
    box-shadow: var(--shadow);
}

.search-input {
    flex: 1;
    padding: 0.75rem 1rem;
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    font-size: 1rem;
}

.search-input:focus {
    outline: none;
    border-color: var(--primary-color);
}

.search-btn {
    padding: 0.75rem 1.5rem;
    background: var(--primary-color);
    color: white;
    border: none;
    border-radius: var(--border-radius);
    font-size: 1rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
}

.search-btn:hover {
    background: var(--primary-hover);
}

.features {
    margin-bottom: 3rem;
}

.feature-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
}

.feature-card {
    background: var(--card-background);
    padding: 2rem;
    border-radius: var(--border-radius);
    text-align: center;
    box-shadow: var(--shadow);
}

.feature-icon {
    font-size: 2.5rem;
    margin-bottom: 1rem;
}

.feature-card h3 {
    margin-bottom: 0.5rem;
}

.feature-card p {
    color: var(--text-muted);
    font-size: 0.9rem;
}

.categories-section {
    margin-bottom: 3rem;
}

.section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
}

.view-all {
    color: var(--primary-color);
    text-decoration: none;
    font-weight: 500;
}

.view-all:hover {
    text-decoration: underline;
}

/* Skeleton loading */
.skeleton {
    animation: pulse 1.5s infinite;
}

.skeleton-icon {
    width: 60px;
    height: 60px;
    background: var(--border-color);
    border-radius: 50%;
    margin: 0 auto 1rem;
}

.skeleton-text {
    height: 1rem;
    background: var(--border-color);
    border-radius: 4px;
    width: 80%;
    margin: 0 auto;
}

.skeleton-title {
    height: 1.5rem;
    background: var(--border-color);
    border-radius: 4px;
    width: 70%;
    margin-bottom: 0.75rem;
}

.skeleton-desc {
    height: 1rem;
    background: var(--border-color);
    border-radius: 4px;
    width: 100%;
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

@media (max-width: 768px) {
    .feature-grid {
        grid-template-columns: 1fr;
    }
}
</style>
{% endblock %}
